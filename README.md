# Token API å®¡è®¡ä¸ç®¡ç†ç³»ç»Ÿ

åŸºäº Django + React çš„ AI API ä»£ç†å®¡è®¡ä¸ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šå‚å•† AI æ¨¡å‹çš„ç»Ÿä¸€ç®¡ç†ã€ç”¨æˆ·é…é¢æ§åˆ¶ã€æˆæœ¬è®¡ç®—å’Œä½¿ç”¨å®¡è®¡ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### åç«¯åŠŸèƒ½
- **ç”¨æˆ·ç®¡ç†**: æ”¯æŒå¤šç”¨æˆ·ç³»ç»Ÿï¼Œè¶…çº§ç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·è§’è‰²
- **é…é¢ç®¡ç†**: çµæ´»çš„é…é¢åˆ†é…å’Œä½¿ç”¨ç›‘æ§
- **APIä»£ç†**: OpenAIå…¼å®¹çš„APIæ¥å£ï¼Œæ”¯æŒå¤šå‚å•†æ¨¡å‹
- **æˆæœ¬è®¡ç®—**: ç²¾ç¡®çš„Tokenè®¡ç®—å’Œæˆæœ¬ç»Ÿè®¡
- **ä½¿ç”¨å®¡è®¡**: å®Œæ•´çš„APIè°ƒç”¨è®°å½•å’Œåˆ†æ
- **æƒé™æ§åˆ¶**: åŸºäºJWTçš„è®¤è¯å’Œæƒé™ç®¡ç†

### å‰ç«¯åŠŸèƒ½
- **ä»ªè¡¨ç›˜**: ç›´è§‚çš„æ•°æ®å¯è§†åŒ–å’Œç»Ÿè®¡å›¾è¡¨
- **ç”¨æˆ·ç®¡ç†**: ç”¨æˆ·åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤å’Œæƒé™ç®¡ç†
- **é…é¢ç®¡ç†**: é…é¢åˆ†é…ã€ç›‘æ§å’ŒAPI Keyç®¡ç†
- **å®æ—¶ç›‘æ§**: APIä½¿ç”¨æƒ…å†µå®æ—¶å±•ç¤º
- **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨ç«¯è®¿é—®

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **Django 4.2** - Webæ¡†æ¶
- **Django REST Framework** - APIæ¡†æ¶
- **SQLite** - æ•°æ®åº“ï¼ˆå¯åˆ‡æ¢åˆ°PostgreSQL/MySQLï¼‰
- **JWT** - èº«ä»½éªŒè¯
- **Uvicorn** - ASGIæœåŠ¡å™¨

### å‰ç«¯
- **React 18** - å‰ç«¯æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨
- **Ant Design** - UIç»„ä»¶åº“
- **Zustand** - çŠ¶æ€ç®¡ç†
- **React Router** - è·¯ç”±ç®¡ç†
- **Recharts** - å›¾è¡¨åº“
- **Axios** - HTTPå®¢æˆ·ç«¯
- **Vite** - æ„å»ºå·¥å…·

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.9+
- Node.js 18+
- npm æˆ– yarn

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd auditing
```

### 2. åç«¯è®¾ç½®

#### åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate     # Windows
```

#### å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

#### æ•°æ®åº“è¿ç§»
```bash
python manage.py makemigrations
python manage.py migrate
```

#### åˆ›å»ºè¶…çº§ç”¨æˆ·
```bash
python manage.py createsuperuser
```

#### å¯åŠ¨åç«¯æœåŠ¡
```bash
python manage.py runserver 0.0.0.0:8000
```

### 3. å‰ç«¯è®¾ç½®

#### å®‰è£…ä¾èµ–
```bash
cd frontend
npm install
```

#### å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

### 4. è®¿é—®ç³»ç»Ÿ

- å‰ç«¯ç•Œé¢: http://localhost:3000
- åç«¯API: http://localhost:8000
- APIæ–‡æ¡£: http://localhost:8000/docs/

## ğŸ” é»˜è®¤è´¦æˆ·

### ç®¡ç†å‘˜è´¦æˆ·
- é‚®ç®±: admin@example.com
- å¯†ç : admin123

### æ™®é€šç”¨æˆ·è´¦æˆ·  
- é‚®ç®±: user@example.com
- å¯†ç : user123

## ğŸ“– APIæ–‡æ¡£

### OpenAPIè§„èŒƒ
ç³»ç»Ÿæä¾›å®Œæ•´çš„OpenAPI 3.0è§„èŒƒæ–‡æ¡£ï¼ŒåŒ…å«æ‰€æœ‰APIæ¥å£çš„è¯¦ç»†è¯´æ˜ã€‚

### ä¸»è¦æ¥å£

#### è®¤è¯æ¥å£
- `POST /api/auth/login/` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout/` - ç”¨æˆ·ç™»å‡º
- `POST /api/auth/change-password/` - ä¿®æ”¹å¯†ç 

#### ç”¨æˆ·ç®¡ç†æ¥å£ï¼ˆç®¡ç†å‘˜ï¼‰
- `GET /api/admin/users/` - è·å–ç”¨æˆ·åˆ—è¡¨
- `POST /api/admin/users/` - åˆ›å»ºç”¨æˆ·
- `PUT /api/admin/users/{id}/` - æ›´æ–°ç”¨æˆ·
- `DELETE /api/admin/users/{id}/` - åˆ é™¤ç”¨æˆ·

#### é…é¢ç®¡ç†æ¥å£ï¼ˆç®¡ç†å‘˜ï¼‰
- `GET /api/admin/quotas/` - è·å–é…é¢åˆ—è¡¨
- `POST /api/admin/quotas/` - åˆ›å»ºé…é¢
- `PUT /api/admin/quotas/{id}/` - æ›´æ–°é…é¢
- `POST /api/admin/quotas/{id}/reset_api_key/` - é‡ç½®API Key

#### OpenAIå…¼å®¹æ¥å£
- `POST /v1/chat/completions` - èŠå¤©å®Œæˆ
- `GET /v1/models` - è·å–æ¨¡å‹åˆ—è¡¨
- `GET /v1/usage` - æŸ¥çœ‹ä½¿ç”¨æƒ…å†µ

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ (React)   â”‚    â”‚  åç«¯ (Django)   â”‚    â”‚  æ•°æ®åº“ (SQLite) â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ ç”¨æˆ·ç•Œé¢       â”‚â—„â”€â”€â–ºâ”‚ â€¢ REST API      â”‚â—„â”€â”€â–ºâ”‚ â€¢ ç”¨æˆ·æ•°æ®       â”‚
â”‚ â€¢ çŠ¶æ€ç®¡ç†       â”‚    â”‚ â€¢ æƒé™æ§åˆ¶       â”‚    â”‚ â€¢ é…é¢ä¿¡æ¯       â”‚
â”‚ â€¢ æ•°æ®å¯è§†åŒ–     â”‚    â”‚ â€¢ APIä»£ç†       â”‚    â”‚ â€¢ ä½¿ç”¨è®°å½•       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
auditing/
â”œâ”€â”€ apps/                   # Djangoåº”ç”¨
â”‚   â”œâ”€â”€ users/             # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ quotas/            # é…é¢ç®¡ç†
â”‚   â””â”€â”€ apis/              # APIä»£ç†
â”œâ”€â”€ frontend/              # Reactå‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/      # APIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ stores/        # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ types/         # ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ public/
â”œâ”€â”€ config/                # Djangoé…ç½®
â”œâ”€â”€ requirements.txt       # Pythonä¾èµ–
â”œâ”€â”€ openapi.yaml          # APIæ–‡æ¡£
â””â”€â”€ README.md
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
åˆ›å»º `.env` æ–‡ä»¶è¿›è¡Œç¯å¢ƒé…ç½®ï¼š

```env
# Djangoè®¾ç½®
SECRET_KEY=your-secret-key
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# æ•°æ®åº“è®¾ç½®
DATABASE_URL=sqlite:///db.sqlite3

# JWTè®¾ç½®
JWT_SECRET_KEY=your-jwt-secret
JWT_ACCESS_TOKEN_LIFETIME=60  # åˆ†é’Ÿ
JWT_REFRESH_TOKEN_LIFETIME=1440  # åˆ†é’Ÿ

# AIæœåŠ¡è®¾ç½®
OPENAI_API_KEY=your-openai-api-key
ANTHROPIC_API_KEY=your-anthropic-api-key
```

### æ•°æ®åº“é…ç½®
é»˜è®¤ä½¿ç”¨SQLiteï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨PostgreSQLï¼š

```python
# settings.py
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'auditing_db',
        'USER': 'your_user',
        'PASSWORD': 'your_password',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Dockeréƒ¨ç½²
```bash
# æ„å»ºé•œåƒ
docker build -t auditing-system .

# è¿è¡Œå®¹å™¨
docker run -p 8000:8000 -p 3000:3000 auditing-system
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
1. ä½¿ç”¨Nginxä½œä¸ºåå‘ä»£ç†
2. ä½¿ç”¨Gunicornä½œä¸ºWSGIæœåŠ¡å™¨
3. ä½¿ç”¨PostgreSQLä½œä¸ºæ•°æ®åº“
4. é…ç½®SSLè¯ä¹¦
5. è®¾ç½®ç¯å¢ƒå˜é‡

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

### ç³»ç»Ÿç›‘æ§
- APIè¯·æ±‚ç›‘æ§
- é…é¢ä½¿ç”¨ç›‘æ§
- é”™è¯¯ç‡ç»Ÿè®¡
- æ€§èƒ½æŒ‡æ ‡

### æ—¥å¿—è®°å½•
- ç”¨æˆ·æ“ä½œæ—¥å¿—
- APIè°ƒç”¨æ—¥å¿—
- é”™è¯¯æ—¥å¿—
- ç³»ç»Ÿæ—¥å¿—

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»ºPull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»ï¼š
- é‚®ç®±: admin@example.com
- Issues: [GitHub Issues](https://github.com/your-repo/issues)

## ğŸ—ºï¸ å¼€å‘è·¯çº¿å›¾

- [ ] æ”¯æŒæ›´å¤šAIæ¨¡å‹å‚å•†
- [ ] å®æ—¶WebSocketé€šçŸ¥
- [ ] é«˜çº§æŠ¥è¡¨åˆ†æ
- [ ] ç§»åŠ¨ç«¯APP
- [ ] æ’ä»¶ç³»ç»Ÿ
- [ ] å¤šè¯­è¨€æ”¯æŒ 